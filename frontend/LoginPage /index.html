<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Login to Roommate Match</title>
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <h1 id="top-header" class="bordered-content">
            Login to My Roommate Match
        </h1>

        <!--
            Playing with color for background of front page
            *Could make a css page to style the content
            *Check 2/26 notes for JavaScript
                *storing emails
                    *would need to make a JavaScript function
            <h1 style="padding: 20px; background-color: rgb(0, 42, 255); border: 1px solid; max-width: 300px;"> </h1>
        -->
        <div class="login-container">
            <!--Text and Buttons-->
            <div id="login-bar" class="login-input">
                <h2>Login</h2>
                <!-- <p>Username</p> -->
                <div>
                    <input
                        type="text"
                        id="user-name"
                        class="user-name"
                        placeholder="Enter your name"
                    />
                </div>
                <br />
                <!-- <p>Class year</p> -->
                <div>
                    <input
                        type="text"
                        id="user-classYear"
                        class="user-classYear"
                        placeholder="Class year"
                    />
                </div>
                <br />
                <!-- <p>Swarthmore Email</p> -->
                <div>
                    <input
                        type="text"
                        id="user-email"
                        class="user-email"
                        placeholder="Swarthmore Email..."
                    />
                </div>
                <br />
                <!-- <p>Password</p> -->
                <div>
                    <input
                        type="password"
                        id="user-password"
                        class="user-password"
                        placeholder="Password"
                    />
                </div>
                <br />
                <!-- Submit button -->
                <div>
                    <button class="submit-button" onclick="buttonClicked()">
                        Submit
                    </button>
                </div>
            </div>
        </div>
        <script>
            /*
             * buttonClicked(): gather form fields and send a POST request
             * to the Flask /login endpoint. On success, redirect to the
             * main UI page.
             */
            function buttonClicked() {
                // Grab input values using their IDs
                const userName = document
                    .getElementById("user-name")
                    .value.trim();
                const userEmail = document
                    .getElementById("user-email")
                    .value.trim();
                const userClassYear = document
                    .getElementById("user-classYear")
                    .value.trim();
                const userPassword =
                    document.getElementById("user-password").value;

                // Simple front‑end validation
                if (!userName || !userPassword) {
                    alert("Please enter both username and password.");
                    return;
                }

                // Send credentials to backend
                fetch("/login", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        username: userName,
                        password: userPassword,
                    }),
                })
                    .then(async (response) => {
                        const data = await response.json();
                        if (response.ok) {
                            alert("Login successful!");
                            // Redirect to user interface page (adjust path if needed)
                            window.location.href =
                                "../UserInterface/index.html";
                        } else {
                            alert(data.error || "Login failed");
                        }
                    })
                    .catch((err) => {
                        console.error(err);
                        alert("Network error – see console for details.");
                    });

                // Original debug message
                console.log(
                    "User Name: " +
                        userName +
                        " | User Email: " +
                        userEmail +
                        " | User Class Year: " +
                        userClassYear,
                );
            }
        </script>

        <!-- Results -->
    </body>
</html>
